{"ast":null,"code":"var _jsxFileName = \"/home/pwn0x80/Documents/projects/radio/src/page/HomeContentBox/HomeContentBox.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { MainWrapper, MainContentOption, MainContentWrapper } from \"../../components/contentWrapper/ContentWrapper\";\nimport { updateCurrentPlaying } from \"../../redux/radioSlice\";\nimport { GenresList } from '../../page/Genres/GenresList.jsx';\nimport { statusControl } from \"../../components/controller/Controller\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst HomeContentBox = () => {\n  _s();\n  const dispatch = useDispatch();\n  const baseUrl = useSelector(state => state.radio.audio.baseUrl);\n  const [trending, setTending] = useState(null);\n  const now = new Date();\n  useEffect(() => {\n    if (baseUrl == null) {\n      return;\n    }\n    if (trending == null) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: \"loading...\"\n      }, void 0, false);\n    }\n    let url = baseUrl + \"/json/stations/search?hidebroken=true&limit=15&order=clickcount&language=english&reverse=true&tag=pop&tagExact=false\";\n    if (typeof Storage !== \"undefined\") {\n      //browser support localStorage   \n      if (localStorage.getItem('trendingList') != null) {\n        let data = localStorage.getItem('trendingList');\n        let newData = JSON.parse(data);\n        // console.log(newData[newData.length - 1].expiry, now.getDay())\n        if (data[newData.length - 1].expiry >= now.getDay()) {\n          fetch(url).then(e => {\n            return e.json();\n          }).then(data => {\n            localStorage.removeItem(\"trendingList\");\n            setTending(data);\n            localStorage.setItem('trendingList', JSON.stringify(data));\n            setTending(data);\n          });\n        } else {\n          setTending(...JSON.parse(data));\n          return;\n        }\n      } else {\n        fetch(url).then(e => {\n          return e.json();\n        }).then(data => {\n          let newdata = [data, {\n            expiry: now.getDay()\n          }];\n          localStorage.setItem('trendingList', JSON.stringify(newdata));\n          setTending(data);\n        });\n      }\n    }\n    //browser does not support localStorage  \n    else {\n      fetch(url).then(e => {\n        return e.json();\n      }).then(data => {\n        setTending(data);\n      });\n    }\n  }, [baseUrl]);\n  let trendingTrigger = detail => function () {\n    //todo error check \n    dispatch(updateCurrentPlaying({\n      coverPic: detail.favicon,\n      trackName: detail.name,\n      currentplayingUrl: detail.url_resolved,\n      uuid: detail.stationuuid\n    }));\n  };\n  return /*#__PURE__*/_jsxDEV(MainWrapper, {\n    children: /*#__PURE__*/_jsxDEV(MainContentWrapper, {\n      style: {\n        height: '300px',\n        overflowY: 'auto'\n      },\n      children: [\"Tending List\", trending.map((e, keys) => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          \"data-id\": `${e === null || e === void 0 ? void 0 : e.stationuuid}`,\n          onClick: trendingTrigger(e),\n          children: [e.name, \" \"]\n        }, keys, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 15\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n};\n_s(HomeContentBox, \"ezisIvgZPYyp32CIiVUDwXgJkBY=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c = HomeContentBox;\nexport default HomeContentBox;\nvar _c;\n$RefreshReg$(_c, \"HomeContentBox\");","map":{"version":3,"names":["useEffect","useState","useDispatch","useSelector","MainWrapper","MainContentOption","MainContentWrapper","updateCurrentPlaying","GenresList","statusControl","HomeContentBox","dispatch","baseUrl","state","radio","audio","trending","setTending","now","Date","url","Storage","localStorage","getItem","data","newData","JSON","parse","length","expiry","getDay","fetch","then","e","json","removeItem","setItem","stringify","newdata","trendingTrigger","detail","coverPic","favicon","trackName","name","currentplayingUrl","url_resolved","uuid","stationuuid","height","overflowY","map","keys"],"sources":["/home/pwn0x80/Documents/projects/radio/src/page/HomeContentBox/HomeContentBox.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { MainWrapper, MainContentOption, MainContentWrapper } from \"../../components/contentWrapper/ContentWrapper\"\n\nimport { updateCurrentPlaying } from \"../../redux/radioSlice\"\nimport { GenresList } from '../../page/Genres/GenresList.jsx';\nimport { statusControl } from \"../../components/controller/Controller\";\nconst HomeContentBox = () => {\n  const dispatch = useDispatch()\n  const baseUrl = useSelector(state => state.radio.audio.baseUrl);\n  const [trending, setTending] = useState(null);\n  const now = new Date();\n  useEffect(() => {\n    if (baseUrl == null) {\n      return\n    }\n\n    if (trending == null) {\n      return (\n        <>\n          loading...\n        </>\n      )\n    }\n    let url = baseUrl + \"/json/stations/search?hidebroken=true&limit=15&order=clickcount&language=english&reverse=true&tag=pop&tagExact=false\"\n    if (typeof (Storage) !== \"undefined\") {\n      //browser support localStorage   \n      if (localStorage.getItem('trendingList') != null) {\n        let data = localStorage.getItem('trendingList')\n        let newData = JSON.parse(data)\n        // console.log(newData[newData.length - 1].expiry, now.getDay())\n        if (data[newData.length - 1].expiry >= now.getDay()) {\n\n          fetch(url).then((e) => {\n            return e.json()\n          }).then((data) => {\n            localStorage.removeItem(\"trendingList\")\n            setTending(data);\n            localStorage.setItem('trendingList', JSON.stringify(data))\n            setTending(data)\n\n          })\n        } else {\n          setTending(...JSON.parse(data))\n          return\n        }\n      } else {\n        fetch(url).then((e) => {\n          return e.json()\n        }).then((data) => {\n\n          let newdata = [data, { expiry: now.getDay() }]\n          localStorage.setItem('trendingList', JSON.stringify(newdata))\n          setTending(data)\n        })\n      }\n\n    }\n    //browser does not support localStorage  \n    else {\n      fetch(url).then((e) => {\n        return e.json()\n      }).then((data) => {\n        setTending(data);\n      })\n    }\n  }, [baseUrl])\n\n  let trendingTrigger = detail => (...ev) => {\n    //todo error check \n    dispatch(updateCurrentPlaying(\n      {\n        coverPic: detail.favicon,\n        trackName: detail.name,\n        currentplayingUrl: detail.url_resolved,\n        uuid: detail.stationuuid,\n      }\n    ));\n  }\n\n\n  return (\n    <MainWrapper>\n      <MainContentWrapper style={{\n        height: '300px', overflowY: 'auto'\n      }}>\n        Tending List\n        {\n          trending.map((e, keys) => {\n            return (\n              <div key={keys} data-id={`${e?.stationuuid}`} onClick={trendingTrigger(e)}>{e.name} </div>\n            )\n          })\n        }\n      </MainContentWrapper>\n    </MainWrapper>\n  )\n}\n\nexport default HomeContentBox\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}