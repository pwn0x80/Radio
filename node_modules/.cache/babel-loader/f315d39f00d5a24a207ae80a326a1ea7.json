{"ast":null,"code":"import { useCallback } from \"react\";\nlet readwriteStore, readonlyStore;\nlet createIndexDB = indexedDB => {\n  return new Promise((resolve, reject) => {\n    const request = indexedDB.open('audioDatabase', 1);\n    request.onerror = err => reject(err);\n    request.onupgradeneeded = () => {\n      const db = request.result;\n      const store = db.createObjectStore('audio', {\n        keyPath: \"id\"\n      });\n      store.createIndex(\"nameDB\", [\"trackName\"], {\n        unique: false\n      });\n    };\n    request.onsuccess = () => {\n      console.info(\"successfully open db\");\n      resolve(request.result);\n    };\n  });\n};\nlet option = db => (method, arg, callback) => {\n  const transaction = db.transaction(\"audio\", method);\n  let store = transaction.objectStore(\"audio\");\n  return callback(arg, store);\n};\nlet modeOption = option2func => {\n  let getAlldb = arg => option2func(\"readwrite\", arg, (arg, store) => store.getAll());\n  let dataViewdb = arg => option2func(\"readonly\", arg, (arg, store) => store.getKey(arg));\n  let dataDeletedb = arg => option2func(\"readwrite\", arg, (arg, store) => {\n    store.delete(arg);\n  });\n  let dataPutdb = arg => option2func(\"readwrite\", arg, (arg, store) => {\n    store.put(arg);\n  });\n  return {\n    dataViewdb,\n    dataDeletedb,\n    dataPutdb,\n    getAlldb\n  };\n};\nlet pipe = function () {\n  for (var _len = arguments.length, func = new Array(_len), _key = 0; _key < _len; _key++) {\n    func[_key] = arguments[_key];\n  }\n  return input => func.reduce((pro, fun) => pro.then(fun), Promise.resolve(input));\n};\nconst indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB || window.shimIndexedDB;\nlet globalstore = indexedDB == null ? console.log(\"broswer didnt support\") : pipe(createIndexDB, option, modeOption)(indexedDB);\nexport default (() => {\n  return globalstore;\n});","map":{"version":3,"names":["useCallback","readwriteStore","readonlyStore","createIndexDB","indexedDB","Promise","resolve","reject","request","open","onerror","err","onupgradeneeded","db","result","store","createObjectStore","keyPath","createIndex","unique","onsuccess","console","info","option","method","arg","callback","transaction","objectStore","modeOption","option2func","getAlldb","getAll","dataViewdb","getKey","dataDeletedb","delete","dataPutdb","put","pipe","func","input","reduce","pro","fun","then","window","mozIndexedDB","webkitIndexedDB","msIndexedDB","shimIndexedDB","globalstore","log"],"sources":["/home/pwn0x80/Documents/projects/radio/src/services/indexedDB.js"],"sourcesContent":["import { useCallback } from \"react\";\n\nlet readwriteStore, readonlyStore;\nlet createIndexDB = (indexedDB) => {\n  return new Promise((resolve, reject) => {\n    const request = indexedDB.open('audioDatabase', 1);\n    request.onerror = (err) => reject(err);\n    request.onupgradeneeded = () => {\n      const db = request.result;\n      const store = db.createObjectStore('audio', { keyPath: \"id\" })\n      store.createIndex(\"nameDB\", [\"trackName\"], { unique: false });\n    }\n    request.onsuccess = () => {\n      console.info(\"successfully open db\")\n      resolve(request.result);\n    }\n  })\n}\n\n\nlet option = db => (method, arg, callback) => {\n  const transaction = db.transaction(\"audio\", method);\n  let store = transaction.objectStore(\"audio\")\n  return callback(arg, store)\n}\n\n\n\nlet modeOption = (option2func) => {\n  let getAlldb = (arg) => option2func(\"readwrite\", arg, (arg, store) => store.getAll())\n  let dataViewdb = (arg) => option2func(\"readonly\", arg, (arg, store) => store.getKey(arg))\n  let dataDeletedb = (arg) => option2func(\"readwrite\", arg, (arg, store) => { store.delete(arg) })\n  let dataPutdb = (arg) => option2func(\"readwrite\", arg, (arg, store) => { store.put(arg) })\n  return ({ dataViewdb, dataDeletedb, dataPutdb, getAlldb })\n\n\n}\nlet pipe = (...func) => (input) => func.reduce((pro, fun) =>\n  pro.then(fun), Promise.resolve(input)\n)\n\n\nconst indexedDB =\n  window.indexedDB ||\n  window.mozIndexedDB ||\n  window.webkitIndexedDB ||\n  window.msIndexedDB ||\n  window.shimIndexedDB;\nlet globalstore = indexedDB == null ?\n  console.log(\"broswer didnt support\")\n  :\n  pipe(\n    createIndexDB,\n    option,\n    modeOption\n  )(indexedDB)\n\nexport default () => {\n  return globalstore\n} \n"],"mappings":"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"},"metadata":{},"sourceType":"module"}